{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\antoi\\\\Downloads\\\\Projet-6-Backend\\\\src\\\\components\\\\Books\\\\BookForm\\\\BookForm.jsx\",\n  _s = $RefreshSig$();\n/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\nimport { generateStarsInputs } from '../../../lib/functions';\nimport { useFilePreview } from '../../../lib/customHooks';\nimport addFileIMG from '../../../images/add_file.png';\nimport styles from './BookForm.module.css';\nimport { updateBook, addBook } from '../../../lib/common';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BookForm({\n  book,\n  validate\n}) {\n  _s();\n  var _book$ratings$find;\n  const userRating = book ? (_book$ratings$find = book.ratings.find(elt => elt.userId === localStorage.getItem('userId'))) === null || _book$ratings$find === void 0 ? void 0 : _book$ratings$find.grade : 0;\n  const [rating, setRating] = useState(0);\n  const navigate = useNavigate();\n  const {\n    register,\n    watch,\n    formState,\n    handleSubmit,\n    reset\n  } = useForm({\n    defaultValues: useMemo(() => ({\n      title: book === null || book === void 0 ? void 0 : book.title,\n      author: book === null || book === void 0 ? void 0 : book.author,\n      year: book === null || book === void 0 ? void 0 : book.year,\n      genre: book === null || book === void 0 ? void 0 : book.genre\n    }), [book])\n  });\n  useEffect(() => {\n    reset(book);\n  }, [book]);\n  const file = watch(['file']);\n  const [filePreview] = useFilePreview(file);\n  useEffect(() => {\n    setRating(userRating);\n  }, [userRating]);\n  useEffect(() => {\n    if (!book && formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n  const onSubmit = async data => {\n    // When we create a new book\n    if (!book) {\n      if (!data.file[0]) {\n        alert('Vous devez ajouter une image');\n      }\n      if (!data.rating) {\n        /* eslint-disable no-param-reassign */\n        data.rating = 0;\n        /* eslint-enable no-param-reassign */\n      }\n      const newBook = await addBook(data);\n      if (!newBook.error) {\n        validate(true);\n      } else {\n        alert(newBook.message);\n      }\n    } else {\n      const updatedBook = await updateBook(data, data.id);\n      if (!updatedBook.error) {\n        navigate('/');\n      } else {\n        alert(updatedBook.message);\n      }\n    }\n  };\n  const readOnlyStars = !!book;\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: styles.Form,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"hidden\",\n      id: \"id\",\n      ...register('id')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"title\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Titre du livre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"title\",\n        ...register('title', {\n          required: 'Le titre est requis'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), formState.errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: formState.errors.title.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"author\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Auteur\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"author\",\n        ...register('author', {\n          required: \"L'auteur est requis\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), formState.errors.author && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: formState.errors.author.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"year\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ann\\xE9e de publication\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"year\",\n        ...register('year', {\n          required: 'L\\'année de publication est requise',\n          validate: value => {\n            const currentYear = new Date().getFullYear();\n            const yearNumber = parseInt(value, 10);\n            if (Number.isNaN(yearNumber)) {\n              return 'L\\'année doit être un nombre.';\n            }\n            if (yearNumber < 0 || yearNumber > currentYear) {\n              return `L'année doit être comprise entre 1 et ${currentYear}.`;\n            }\n            return true; // Validation réussie\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), formState.errors.year && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: formState.errors.year.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 35\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"genre\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Genre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"genre\",\n        ...register('genre', {\n          required: 'Le genre est requis'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), formState.errors.genre && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: formState.errors.genre.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"rate\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Note\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Stars,\n        children: generateStarsInputs(rating, register, readOnlyStars)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"file\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Visuel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.AddImage,\n        children: filePreview || book !== null && book !== void 0 && book.imageUrl ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: filePreview !== null && filePreview !== void 0 ? filePreview : book !== null && book !== void 0 && book.imageUrl ? `http://localhost:5000${book.imageUrl}` : '',\n            alt: \"preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Modifier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: addFileIMG,\n            alt: \"Add file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ajouter une image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ...register('file'),\n        type: \"file\",\n        id: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Publier\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(BookForm, \"Hp/nLWQTIE8uKqa5znAhX+f+pcU=\", false, function () {\n  return [useNavigate, useForm, useFilePreview];\n});\n_c = BookForm;\nBookForm.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    _id: PropTypes.string,\n    userId: PropTypes.string,\n    title: PropTypes.string,\n    author: PropTypes.string,\n    year: PropTypes.number,\n    imageUrl: PropTypes.string,\n    genre: PropTypes.string,\n    ratings: PropTypes.arrayOf(PropTypes.shape({\n      userId: PropTypes.string,\n      grade: PropTypes.number\n    })),\n    averageRating: PropTypes.number\n  }),\n  validate: PropTypes.func\n};\nBookForm.defaultProps = {\n  book: null,\n  validate: null\n};\nexport default BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useForm","PropTypes","useNavigate","generateStarsInputs","useFilePreview","addFileIMG","styles","updateBook","addBook","jsxDEV","_jsxDEV","Fragment","_Fragment","BookForm","book","validate","_s","_book$ratings$find","userRating","ratings","find","elt","userId","localStorage","getItem","grade","rating","setRating","navigate","register","watch","formState","handleSubmit","reset","defaultValues","title","author","year","genre","file","filePreview","dirtyFields","rate","document","querySelector","value","parseInt","onSubmit","data","alert","newBook","error","message","updatedBook","id","readOnlyStars","className","Form","children","type","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","required","errors","currentYear","Date","getFullYear","yearNumber","Number","isNaN","Stars","AddImage","imageUrl","src","alt","_c","propTypes","shape","string","_id","number","arrayOf","averageRating","func","defaultProps","$RefreshReg$"],"sources":["C:/Users/antoi/Downloads/Projet-6-Backend/src/components/Books/BookForm/BookForm.jsx"],"sourcesContent":["/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as PropTypes from 'prop-types';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { generateStarsInputs } from '../../../lib/functions';\r\nimport { useFilePreview } from '../../../lib/customHooks';\r\nimport addFileIMG from '../../../images/add_file.png';\r\nimport styles from './BookForm.module.css';\r\nimport { updateBook, addBook } from '../../../lib/common';\r\n\r\nfunction BookForm({ book, validate }) {\r\n  const userRating = book ? book.ratings.find((elt) => elt.userId === localStorage.getItem('userId'))?.grade : 0;\r\n\r\n  const [rating, setRating] = useState(0);\r\n\r\n  const navigate = useNavigate();\r\n  const {\r\n    register, watch, formState, handleSubmit, reset,\r\n  } = useForm({\r\n    defaultValues: useMemo(() => ({\r\n      title: book?.title,\r\n      author: book?.author,\r\n      year: book?.year,\r\n      genre: book?.genre,\r\n    }), [book]),\r\n  });\r\n  useEffect(() => {\r\n    reset(book);\r\n  }, [book]);\r\n  const file = watch(['file']);\r\n  const [filePreview] = useFilePreview(file);\r\n\r\n  useEffect(() => {\r\n    setRating(userRating);\r\n  }, [userRating]);\r\n\r\n  useEffect(() => {\r\n    if (!book && formState.dirtyFields.rating) {\r\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\r\n      setRating(parseInt(rate, 10));\r\n      formState.dirtyFields.rating = false;\r\n    }\r\n  }, [formState]);\r\n\r\n  const onSubmit = async (data) => {\r\n    // When we create a new book\r\n    if (!book) {\r\n      if (!data.file[0]) {\r\n        alert('Vous devez ajouter une image');\r\n      }\r\n      if (!data.rating) {\r\n        /* eslint-disable no-param-reassign */\r\n        data.rating = 0;\r\n        /* eslint-enable no-param-reassign */\r\n      }\r\n      const newBook = await addBook(data);\r\n      if (!newBook.error) {\r\n        validate(true);\r\n      } else {\r\n        alert(newBook.message);\r\n      }\r\n    } else {\r\n      const updatedBook = await updateBook(data, data.id);\r\n      if (!updatedBook.error) {\r\n        navigate('/');\r\n      } else {\r\n        alert(updatedBook.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const readOnlyStars = !!book;\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.Form}>\r\n      <input type=\"hidden\" id=\"id\" {...register('id')} />\r\n      <label htmlFor=\"title\">\r\n        <p>Titre du livre</p>\r\n        <input\r\n          type=\"text\"\r\n          id=\"title\"\r\n          {...register('title', { required: 'Le titre est requis' })}\r\n        />\r\n        {formState.errors.title && <p className={styles.error}>{formState.errors.title.message}</p>}\r\n      </label>\r\n      <label htmlFor=\"author\">\r\n        <p>Auteur</p>\r\n        <input\r\n          type=\"text\"\r\n          id=\"author\"\r\n          {...register('author', { required: \"L'auteur est requis\" })}\r\n        />\r\n        {formState.errors.author\r\n        && <p className={styles.error}>{formState.errors.author.message}</p>}\r\n      </label>\r\n      <label htmlFor=\"year\">\r\n        <p>Année de publication</p>\r\n        <input\r\n          type=\"text\"\r\n          id=\"year\"\r\n          {\r\n            ...register('year', {\r\n              required: 'L\\'année de publication est requise',\r\n              validate: (value) => {\r\n                const currentYear = new Date().getFullYear();\r\n                const yearNumber = parseInt(value, 10);\r\n                if (Number.isNaN(yearNumber)) {\r\n                  return 'L\\'année doit être un nombre.';\r\n                }\r\n                if (yearNumber < 0 || yearNumber > currentYear) {\r\n                  return `L'année doit être comprise entre 1 et ${currentYear}.`;\r\n                }\r\n                return true; // Validation réussie\r\n              },\r\n            })\r\n          }\r\n        />\r\n        {formState.errors.year && <p className={styles.error}>{formState.errors.year.message}</p>}\r\n      </label>\r\n      <label htmlFor=\"genre\">\r\n        <p>Genre</p>\r\n        <input\r\n          type=\"text\"\r\n          id=\"genre\"\r\n          {...register('genre', { required: 'Le genre est requis' })}\r\n        />\r\n        {formState.errors.genre && <p className={styles.error}>{formState.errors.genre.message}</p>}\r\n      </label>\r\n      <label htmlFor=\"rate\">\r\n        <p>Note</p>\r\n        <div className={styles.Stars}>\r\n          {generateStarsInputs(rating, register, readOnlyStars)}\r\n        </div>\r\n      </label>\r\n      <label htmlFor=\"file\">\r\n        <p>Visuel</p>\r\n        <div className={styles.AddImage}>\r\n          {filePreview || book?.imageUrl ? (\r\n            <>\r\n              <img src={filePreview ?? (book?.imageUrl ? `http://localhost:5000${book.imageUrl}` : '')} alt=\"preview\" />\r\n              <p>Modifier</p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <img src={addFileIMG} alt=\"Add file\" />\r\n              <p>Ajouter une image</p>\r\n            </>\r\n          )}\r\n\r\n        </div>\r\n        <input {...register('file')} type=\"file\" id=\"file\" />\r\n      </label>\r\n      <button type=\"submit\">Publier</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nBookForm.propTypes = {\r\n  book: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    _id: PropTypes.string,\r\n    userId: PropTypes.string,\r\n    title: PropTypes.string,\r\n    author: PropTypes.string,\r\n    year: PropTypes.number,\r\n    imageUrl: PropTypes.string,\r\n    genre: PropTypes.string,\r\n    ratings: PropTypes.arrayOf(PropTypes.shape({\r\n      userId: PropTypes.string,\r\n      grade: PropTypes.number,\r\n    })),\r\n    averageRating: PropTypes.number,\r\n  }),\r\n  validate: PropTypes.func,\r\n};\r\n\r\nBookForm.defaultProps = {\r\n  book: null,\r\n  validate: null,\r\n};\r\nexport default BookForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}