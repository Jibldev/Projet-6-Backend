{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getAuthenticatedUser } from './common';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useUser() {\n  _s();\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n  useEffect(() => {\n    async function getUserDetails() {\n      const {\n        authenticated,\n        user\n      } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n  return {\n    connectedUser,\n    auth,\n    userLoading\n  };\n}\n_s(useUser, \"USUuoq3iL4KXhbv5aB1AeqEyIFU=\");\nexport function useBestRatedBooks(currentBookId) {\n  _s2();\n  const [bestRatedBooks, setBestRatedBooks] = useState([]);\n  useEffect(() => {\n    async function getRatedBooks() {\n      try {\n        const url = `http://localhost:5000/api/top-books/${currentBookId}`;\n        const response = await fetch(url);\n        const books = await response.json();\n        setBestRatedBooks(books);\n      } catch (error) {\n        console.error('❌ Erreur lors du chargement des meilleurs livres :', error);\n      }\n    }\n    if (currentBookId) {\n      getRatedBooks();\n    }\n  }, [currentBookId]);\n  return {\n    bestRatedBooks\n  };\n}\n_s2(useBestRatedBooks, \"ChcU1WsFFqQphNHn42azBTwLxW8=\");\nexport function useFilePreview(file) {\n  _s3();\n  var _file$, _fileInput$;\n  const fileInput = (_file$ = file[0]) !== null && _file$ !== void 0 ? _file$ : [];\n  const [imgSrc, setImgSrc] = useState(null);\n  useEffect(() => {\n    var _file$2;\n    if (file && ((_file$2 = file[0]) === null || _file$2 === void 0 ? void 0 : _file$2.length) > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [(_fileInput$ = fileInput[0]) === null || _fileInput$ === void 0 ? void 0 : _fileInput$.name]);\n  return [imgSrc, setImgSrc];\n}\n_s3(useFilePreview, \"Rxc+5LYzXyTnmDg8veUjSLSqj8Y=\");","map":{"version":3,"names":["useState","useEffect","getAuthenticatedUser","useUser","_s","connectedUser","setConnectedUser","auth","setAuth","userLoading","setUserLoading","getUserDetails","authenticated","user","useBestRatedBooks","currentBookId","_s2","bestRatedBooks","setBestRatedBooks","getRatedBooks","url","response","fetch","books","json","error","console","useFilePreview","file","_s3","_file$","_fileInput$","fileInput","imgSrc","setImgSrc","_file$2","length","newUrl","URL","createObjectURL","name"],"sources":["C:/Users/antoi/Downloads/Projet-6-Backend/frontend/src/lib/customHooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getAuthenticatedUser } from './common';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useUser() {\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n\n  useEffect(() => {\n    async function getUserDetails() {\n      const { authenticated, user } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n\n  return { connectedUser, auth, userLoading };\n}\n\nexport function useBestRatedBooks(currentBookId) {\n  const [bestRatedBooks, setBestRatedBooks] = useState([]);\n\n  useEffect(() => {\n    async function getRatedBooks() {\n      try {\n        const url = `http://localhost:5000/api/top-books/${currentBookId}`;\n        const response = await fetch(url);\n        const books = await response.json();\n        setBestRatedBooks(books);\n      } catch (error) {\n        console.error('❌ Erreur lors du chargement des meilleurs livres :', error);\n      }\n    }\n\n    if (currentBookId) {\n      getRatedBooks();\n    }\n  }, [currentBookId]);\n\n  return { bestRatedBooks };\n}\n\nexport function useFilePreview(file) {\n  const fileInput = file[0] ?? [];\n  const [imgSrc, setImgSrc] = useState(null);\n\n  useEffect(() => {\n    if (file && file[0]?.length > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [fileInput[0]?.name]);\n\n  return [imgSrc, setImgSrc];\n}\n"],"mappings":";;;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,oBAAoB,QAAQ,UAAU;;AAE/C;AACA,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,eAAeU,cAAcA,CAAA,EAAG;MAC9B,MAAM;QAAEC,aAAa;QAAEC;MAAK,CAAC,GAAG,MAAMX,oBAAoB,CAAC,CAAC;MAC5DI,gBAAgB,CAACO,IAAI,CAAC;MACtBL,OAAO,CAACI,aAAa,CAAC;MACtBF,cAAc,CAAC,KAAK,CAAC;IACvB;IACAC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEN,aAAa;IAAEE,IAAI;IAAEE;EAAY,CAAC;AAC7C;AAACL,EAAA,CAhBeD,OAAO;AAkBvB,OAAO,SAASW,iBAAiBA,CAACC,aAAa,EAAE;EAAAC,GAAA;EAC/C,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAExDC,SAAS,CAAC,MAAM;IACd,eAAekB,aAAaA,CAAA,EAAG;MAC7B,IAAI;QACF,MAAMC,GAAG,GAAG,uCAAuCL,aAAa,EAAE;QAClE,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;QACjC,MAAMG,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QACnCN,iBAAiB,CAACK,KAAK,CAAC;MAC1B,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,oDAAoD,EAAEA,KAAK,CAAC;MAC5E;IACF;IAEA,IAAIV,aAAa,EAAE;MACjBI,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACJ,aAAa,CAAC,CAAC;EAEnB,OAAO;IAAEE;EAAe,CAAC;AAC3B;AAACD,GAAA,CArBeF,iBAAiB;AAuBjC,OAAO,SAASa,cAAcA,CAACC,IAAI,EAAE;EAAAC,GAAA;EAAA,IAAAC,MAAA,EAAAC,WAAA;EACnC,MAAMC,SAAS,IAAAF,MAAA,GAAGF,IAAI,CAAC,CAAC,CAAC,cAAAE,MAAA,cAAAA,MAAA,GAAI,EAAE;EAC/B,MAAM,CAACG,MAAM,EAAEC,SAAS,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EAE1CC,SAAS,CAAC,MAAM;IAAA,IAAAkC,OAAA;IACd,IAAIP,IAAI,IAAI,EAAAO,OAAA,GAAAP,IAAI,CAAC,CAAC,CAAC,cAAAO,OAAA,uBAAPA,OAAA,CAASC,MAAM,IAAG,CAAC,EAAE;MAC/B,MAAMC,MAAM,GAAGC,GAAG,CAACC,eAAe,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAE9C,IAAIS,MAAM,KAAKJ,MAAM,EAAE;QACrBC,SAAS,CAACG,MAAM,CAAC;MACnB;IACF;EACF,CAAC,EAAE,EAAAN,WAAA,GAACC,SAAS,CAAC,CAAC,CAAC,cAAAD,WAAA,uBAAZA,WAAA,CAAcS,IAAI,CAAC,CAAC;EAExB,OAAO,CAACP,MAAM,EAAEC,SAAS,CAAC;AAC5B;AAACL,GAAA,CAfeF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}